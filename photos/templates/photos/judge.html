{% extends "index/base_judge.html" %}
{% load static %}
{% block title_name %}
  <title>評審</title>
{% endblock title_name %}

{% block import_source %}
<style>
  h3 {
    margin: 0px;
  }
  .title {
    border: 5px solid #ddd;
    padding: 10px;
    border-radius: 10px;
  }
  .imgBorder {
    padding: 0px;
    background-color: white;
    box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4);
    -moz-box-shadow: 0 1px 2px rgba(34,25,25,0.4);
    -webkit-box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4);
    max-width: 1024px;   /*fit with flickr photo size of _b url*/
    max-height: 1024px;	 /*fit with flickr photo size of _b url*/
  }
</style>
{% endblock import_source %}

{% block body_block %}
<!--<div class='container' style="width:50%;">-->
<div class='container'>
  <br>
  {% for photo in photos %}
  <div id="{{ photo.user_id }}-{{ photo.photo_id }}">
    <div class="well title">
      &nbsp&nbsp&nbsp
      <h3 style="display: inline-block;">
        {{ photo.user_id }}-{{ photo.photo_id }}&nbsp&nbsp&nbsp
      </h3>
      <h3 style="display: inline-block;">
        {{ photo.title }}&nbsp&nbsp&nbsp
      </h3>
      {% if sorted == True %}
      <h3 style="float:right;">
        票數: {{ photo.votes }}&nbsp&nbsp&nbsp
      </h3>
      {% endif %}
      <h3 style="float:right;">
        <i class="fa fa-map-marker"></i>
        {{ photo.location_marker }}&nbsp&nbsp&nbsp
      </h3>
    </div>
    <br style="clear:both;">
    <center><img class="imgBorder" src="{{ photo.flickr_photo_url }}" alt=""></center>
    <hr style="border:2px solid #dddddd;">
  </div>
  {% endfor %}

  {% if all_page > 0 %}
    <div class="text-center">
      <ul class="pagination">
        <li>
          {% if page|add:-1 < 1 %}
            {% if sorted == True %}
            <a href="{% url 'photos:sorted_judge_with_page' 1%}" aria-label="Previous">
            {% else %}
            <a href="{% url 'photos:judge_with_page' 1%}" aria-label="Previous">
            {% endif%}
          {% else %}
            {% if sorted == True %}
            <a href="{% url 'photos:sorted_judge_with_page' page|add:"-1"%}" aria-label="Previous">
            {% else %}
            <a href="{% url 'photos:judge_with_page' page|add:"-1"%}" aria-label="Previous">
            {% endif%}
          {% endif%}
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        {% load get_range %}
        {% for i in all_page|get_range %}
        {% if i|add:1 == page %}
          <li class="active"><a href="#">{{i|add:1}}</a></li>
        {% else %}
          <li>
            {% if sorted == True %}
            <a href="{% url 'photos:sorted_judge_with_page' i|add:1%}">
            {% else %}
            <a href="{% url 'photos:judge_with_page' i|add:1%}">
            {% endif %}
              {{i|add:1}}
            </a>
          </li>
        {% endif %}
        {% endfor %}
        <li>
          {% if page|add:1 > all_page %}
            {% if sorted == True %}
            <a href="{% url 'photos:sorted_judge_with_page' all_page %}" aria-label="Next">
            {% else %}
            <a href="{% url 'photos:judge_with_page' all_page %}" aria-label="Next">
            {% endif%}
          {% else %}
            {% if sorted == True %}
            <a href="{% url 'photos:sorted_judge_with_page' page|add:1 %}" aria-label="Next">
            {% else %}
            <a href="{% url 'photos:judge_with_page' page|add:1 %}" aria-label="Next">
            {% endif %}
          {% endif %}

            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </div>
    {% endif %}

</dive>
<script>
$("#searchfor_submit").click(function(){	
	var search_id=$("#searchfor").val();
	var index= search_id.indexOf("-");
	var num1=search_id.substr(0,index);
	var num2=search_id.substr(index+1);
	
	if (num1<=22){
		if(num1==22&&num2>=3) page=2;
		else page=1;
	}
	else if(num1<=41){
		if(num1==41&&num2>=3) page=3;
		else page=2;
	}
	else if(num1<=60){
		if(num1==60&&num2>=2) page=4;
		else page=3;
	}
	else if(num1<=79){
		if(num1==79&&num2>=5) page=5;
		else page=4;
	}
	else if(num1<=96){
		if(num1==96&&num2>=5) page=6;
		else page=5;
	}
	else if(num1<=115){
		if(num1==115&&num2>=4) page=7;
		else page=6;
	}
	else if(num1<=134){
		if(num1==134&&num2>=4) page=8;
		else page=7;
	}
	else page=8;
	url=page+"#"+search_id;
	window.location.href = url;
});
</script>
{% endblock body_block %}
